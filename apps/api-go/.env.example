# API Server (Go) - example environment variables
# Copy to .env and adjust values:
#   cp apps/api-go/env.example apps/api-go/.env

# Required
DATABASE_URL=postgresql://user:password@localhost:5432/wedding_builder?sslmode=disable
JWT_SECRET=change-me-to-a-strong-secret

# How to generate a strong JWT secret (examples):
# - OpenSSL (recommended):
#   openssl rand -base64 48
# - Node:
#   node -e "console.log(require('crypto').randomBytes(48).toString('base64'))"

# Server
PORT=3000

# JWT settings (optional)
JWT_ACCESS_EXPIRATION=15m
JWT_REFRESH_EXPIRATION=30d
JWT_ISSUER=sacred-vows-api
JWT_AUDIENCE=sacred-vows-client
JWT_CLOCK_SKEW=60s

# Refresh token HMAC fingerprinting (required)
# JSON array of keys. key_b64 must decode to >= 32 bytes.
# Replace these example keys with your own securely generated keys.
# How to generate a new HMAC key (base64, >= 32 bytes):
# - OpenSSL (recommended, 32 bytes):
#   openssl rand -base64 32
# - Node (32 bytes):
#   node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
#
# Rotation pattern:
# 1) Add a new entry with a NEW id + key_b64 to REFRESH_TOKEN_HMAC_KEYS
# 2) Set REFRESH_TOKEN_HMAC_ACTIVE_KEY_ID to the new id
# 3) Keep old keys in the list until all old refresh tokens have expired
REFRESH_TOKEN_HMAC_KEYS=[{"id":1,"key_b64":"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA="},{"id":2,"key_b64":"AQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQE="}]
REFRESH_TOKEN_HMAC_ACTIVE_KEY_ID=1

# Google OAuth (optional)
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GOOGLE_REDIRECT_URI=http://localhost:3000/api/auth/google/callback
FRONTEND_URL=http://localhost:5173

# Storage (optional)
UPLOAD_PATH=./uploads
LAYOUTS_DIR=./layouts


