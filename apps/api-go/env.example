# =============================================================================
# Environment Variables Template
# =============================================================================
# 
# IMPORTANT: This file is a template. DO NOT commit your actual .env files.
# 
# SETUP INSTRUCTIONS:
# ===================
# 
# This project uses separate environment files for different deployment scenarios:
# 
# 1. For LOCAL DEVELOPMENT (running directly on your host machine):
#    - Copy this file to .env.local
#    - Use localhost addresses for all services
#    - Command: cp env.example .env.local
# 
# 2. For DOCKER DEVELOPMENT (using docker-compose):
#    - Copy this file to .env.docker  
#    - Use Docker service names for all services
#    - Command: cp env.example .env.docker
# 
# 3. After creating .env.local or .env.docker:
#    - Update the values marked with "your-*" or "change-me"
#    - See the comments below for environment-specific values
# 
# QUICK START:
# ============
# 
# For Docker (recommended):
#   docker compose up
#   (docker-compose.yml automatically uses .env.docker)
# 
# For Local:
#   cd apps/api-go
#   cp env.example .env.local
#   ./scripts/select-env.sh local
#   go run cmd/server/main.go
# 
# See docs/env-setup.md for detailed documentation.
# 
# =============================================================================

# Environment selection (determines which config file to load)
# Options: local, dev, prod (defaults to local if not set)
APP_ENV=local

# =============================================================================
# Firestore Database Configuration
# =============================================================================
# Required - infrastructure-level configuration
GCP_PROJECT_ID=your-gcp-project-id
FIRESTORE_DATABASE=(default)

# Firestore Emulator Host
# IMPORTANT: Set different values for .env.local vs .env.docker
# 
# For .env.local (running on host):
#   FIRESTORE_EMULATOR_HOST=localhost:8080
# 
# For .env.docker (running in Docker):
#   FIRESTORE_EMULATOR_HOST=firestore-emulator:8080
# 
# Leave unset or empty to connect to production Firestore
FIRESTORE_EMULATOR_HOST=localhost:8080

# =============================================================================
# Authentication Secrets (REQUIRED - sensitive)
# =============================================================================
# Generate a secure random secret (minimum 32 characters)
# Example: openssl rand -base64 32
JWT_SECRET=change-me-minimum-32-characters-long

# Refresh Token HMAC Keys (JSON array)
# Format: [{"id":1,"key_b64":"base64-encoded-32-byte-key"}]
# Generate key: openssl rand -base64 32
REFRESH_TOKEN_HMAC_KEYS=[{"id":1,"key_b64":"REPLACE_WITH_BASE64_32B_OR_MORE=="}]
REFRESH_TOKEN_HMAC_ACTIVE_KEY_ID=1

# =============================================================================
# Google OAuth (sensitive)
# =============================================================================
# Get these from Google Cloud Console
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=

# =============================================================================
# Email Service API Keys (sensitive)
# =============================================================================
# Note: Email vendor selection, limits, and from address/name are in config files
# See apps/api-go/config/{env}.yaml for email configuration
MAILJET_API_KEY=
MAILJET_SECRET_KEY=
MAILGUN_API_KEY=

# =============================================================================
# R2/MinIO Storage for Publishing (sensitive)
# =============================================================================
# For LOCAL development with MinIO:
#   R2_ENDPOINT=http://localhost:9000
#   R2_ACCESS_KEY_ID=minioadmin
#   R2_SECRET_ACCESS_KEY=minioadmin
# 
# For DOCKER development with MinIO:
#   R2_ENDPOINT=http://minio:9000
#   R2_ACCESS_KEY_ID=minioadmin
#   R2_SECRET_ACCESS_KEY=minioadmin
# 
# For Cloudflare R2 (production):
#   Leave R2_ENDPOINT empty and set R2_ACCOUNT_ID instead
#   R2_ACCOUNT_ID=your-cloudflare-account-id
R2_ENDPOINT=http://localhost:9000
R2_ACCESS_KEY_ID=minioadmin
R2_SECRET_ACCESS_KEY=minioadmin
R2_BUCKET=sacred-vows-published-local
R2_ACCOUNT_ID=

# Public Assets R2 Bucket (for default images, layouts, music)
PUBLIC_ASSETS_R2_BUCKET=sacred-vows-public-assets-local
PUBLIC_ASSETS_CDN_URL=http://localhost:9000/sacred-vows-public-assets-local

# =============================================================================
# S3/MinIO Storage for Assets (sensitive - local development)
# =============================================================================
# For LOCAL development:
#   S3_ENDPOINT=http://localhost:9000
#   S3_PUBLIC_ENDPOINT=http://localhost:9000
# 
# For DOCKER development:
#   S3_ENDPOINT=http://minio:9000
#   S3_PUBLIC_ENDPOINT=http://localhost:9000
# 
# S3_ACCESS_KEY_ID and S3_SECRET_ACCESS_KEY should match MinIO credentials
S3_ENDPOINT=http://localhost:9000
S3_PUBLIC_ENDPOINT=http://localhost:9000
S3_ACCESS_KEY_ID=minioadmin
S3_SECRET_ACCESS_KEY=minioadmin
S3_ASSETS_BUCKET=sacred-vows-assets-local
S3_REGION=us-east-1

# =============================================================================
# GCS Storage (non-sensitive - configured in YAML config files)
# =============================================================================
# GCS_ASSETS_BUCKET is now in config/{env}.yaml
# Can still be overridden via environment variables if needed
# Note: GCS bucket is private - assets accessed via signed URLs, not public URLs

# =============================================================================
# Publishing Configuration
# =============================================================================
# Note: PUBLISHED_BASE_DOMAIN, PUBLISH_ARTIFACT_STORE, and other non-sensitive
# publishing settings are in config files. Only sensitive R2 credentials are here.
# R2_PUBLIC_BASE is the public URL prefix for published sites
R2_PUBLIC_BASE=

# =============================================================================
# Snapshot Renderer (optional)
# =============================================================================
# Only set if different from config file defaults
# SNAPSHOT_RENDERER_SCRIPT=/absolute/path/to/apps/builder/src/template-engine/src/renderPublishedHTML.js
# SNAPSHOT_RENDERER_NODE=node

# =============================================================================
# Published Artifacts (optional)
# =============================================================================
# Only set if different from config file defaults
# PUBLISHED_ARTIFACTS_DIR=./published
# PUBLISHED_ARTIFACTS_PUBLIC_BASE=http://localhost:3000

# =============================================================================
# OpenTelemetry Configuration
# =============================================================================
# Set to false to disable observability entirely (no overhead when disabled)
OTEL_ENABLED=true

# OpenTelemetry Exporter Endpoint
# IMPORTANT: Set different values for .env.local vs .env.docker
# 
# For .env.local (running on host):
#   OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317
# 
# For .env.docker (running in Docker):
#   OTEL_EXPORTER_OTLP_ENDPOINT=http://tempo:4317
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317
OTEL_EXPORTER_OTLP_PROTOCOL=grpc
OTEL_SERVICE_NAME=sacred-vows-api
OTEL_SERVICE_VERSION=unknown
OTEL_RESOURCE_ATTRIBUTES=deployment.environment=local
OTEL_TRACES_SAMPLER=traceidratio
OTEL_TRACES_SAMPLER_ARG=0.1

# =============================================================================
# Environment-Specific Value Summary
# =============================================================================
# 
# When creating .env.local, use these values:
#   FIRESTORE_EMULATOR_HOST=localhost:8080
#   S3_ENDPOINT=http://localhost:9000
#   R2_ENDPOINT=http://localhost:9000
#   OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317
# 
# When creating .env.docker, use these values:
#   FIRESTORE_EMULATOR_HOST=firestore-emulator:8080
#   S3_ENDPOINT=http://minio:9000
#   R2_ENDPOINT=http://minio:9000
#   OTEL_EXPORTER_OTLP_ENDPOINT=http://tempo:4317
# 
# =============================================================================
