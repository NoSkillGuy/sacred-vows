# Development Dockerfile with hot reloading support
# This image includes Node.js and pnpm for Vite development server
FROM node:20-alpine

WORKDIR /app

# Install build dependencies and wget for healthchecks
RUN apk add --no-cache git ca-certificates tzdata wget

# Install pnpm
RUN npm install -g pnpm@10.24.0

# Copy package files for dependency caching
COPY apps/builder/package.json apps/builder/pnpm-lock.yaml ./

# Install dependencies
RUN pnpm install --frozen-lockfile

# Note: Source code is mounted as volume in docker-compose.yml, so we don't copy it here
# This allows hot reloading without rebuilding the image

# Expose Vite dev server port
EXPOSE 5173

# Default command runs Vite dev server
# Host binding is configured in vite.config.ts (host: '0.0.0.0')
CMD ["pnpm", "run", "dev"]

